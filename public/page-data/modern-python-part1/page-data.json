{"componentChunkName":"component---src-templates-post-js","path":"/modern-python-part1/","result":{"data":{"markdownRemark":{"html":"<p>When learning a programming language, the focus is essentially on understanding the syntax, the code style, and the underlying concepts. With time, you become sufficiently comfortable with the language and you start writing programs solving new exciting problems.</p>\n<p>However, when you need to move towards this step, there is an aspect that one might have underestimated which is how to build the right environment. An environment that enforces good software engineering practices, improves productivity and facilitates collaboration. Packaging and tooling with Python is often described as cumbersome and challenging. In this regard, several open-source projects emerged in the last years and aim at facilitating the management of Python packages along your working projects. We are going to see here how to use two of them: <a href=\"https://github.com/pyenv/pyenv\">Pyenv</a>, to manage and install different Python versions, and <a href=\"https://python-poetry.org/\">Poetry</a>, to manage your packages and virtual environments. Combined or used individually, they help you to establish a productive environment.</p>\n<h2 id=\"pre-requisites\" style=\"position:relative;\"><a href=\"#pre-requisites\" aria-label=\"pre requisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pre-requisites</h2>\n<h3 id=\"pyenv-installation\" style=\"position:relative;\"><a href=\"#pyenv-installation\" aria-label=\"pyenv installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>pyenv</code> installation</h3>\n<p>To install <code>pyenv</code> you require some OS-specific dependencies. These are needed as <code>pyenv</code> installs Python by building from source. For <strong>Ubuntu/Debian</strong> be sure to have the following packages installed:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">sudo apt-get install -y make build-essential libssl-dev zlib1g-dev \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev python-openssl</span></span></span></code></pre>\n<p>To know the required dependencies on your OS go read this <a href=\"https://github.com/pyenv/pyenv/wiki#suggested-build-environment\">documentation</a>. Once the dependencies are installed you can now install <code>pyenv</code>. For this, I recommend using <a href=\"https://github.com/pyenv/pyenv-installer\">pyenv-installer</a> that automates the process.</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">curl https://pyenv.run | bash</span></span></span></code></pre>\n<p>From there on, you can install on your system any versions of Python you wish. You can use the following command to all versions and flavors of Python available:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv install --list</span></span></span></code></pre>\n<p>In our case we are going to install the classical CPython in versions <code>3.7.10</code> , <code>3.8.7</code> , <code>3.9.2</code>:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv install 3.7.10</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Downloading Python-3.7.10.tar.xz...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">-&gt; https://www.python.org/ftp/python/3.7.10/Python-3.7.10.tar.xz</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Installing Python-3.7.10...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Installed Python-3.7.10 to /home/fbraza/.pyenv/versions/3.7.10</span></span></span></code></pre>\n<p>Once the versions are installed you can see them by running:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv versions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">* system</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  3.7.10</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  3.8.7</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  3.9.2</span></span></span></code></pre>\n<p>You can see that <code>pyenv</code> identified recently installed Python versions and also the one installed by default on your system. The <code>*</code> before <code>system</code> means that the global version used now is the system version. <code>pyenv</code> permits to manage Python versions at different levels: globally and locally. Let's say we are going to set version <code>3.7.10</code> as our global version.</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv global 3.7.10</span></span></span></code></pre>\n<p>Let's list our version again:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv versions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  system</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">* 3.7.10 (set by /home/&lt;username&gt;/.pyenv/version)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  3.8.7</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  3.9.2</span></span></span></code></pre>\n<p>You can see that <code>pyenv</code> sets <code>3.7.10</code> as our global Python version. This will not alter the operations that require the use of the system version. The path you can read between parenthesis corresponds to the path that points to the required Python version. How does this work? Briefly, <code>pyenv</code> captures Python commands using executables injected into your <code>PATH</code>. Then it determines which Python version you need to use, and passes the commands to the correct Python installation. Feel free to read the complete <a href=\"https://github.com/pyenv/pyenv\">documentation</a> to better understand the functionalities and possibilities offered by <code>pyenv</code>.</p>\n<blockquote>\n<p>Note: Don't be confused by the semantic here. Change the global version will not affect your system version. The system version corresponds to the version used by your OS to accomplish specific tasks or run background processes that depend on this specific Python version. Do not switch the system version to another one or you may face several issues with your OS! This version is usually updated along with your OS. The global version is just the version that <code>pyenv</code> will use to execute your Python commands / programs globally.</p>\n</blockquote>\n<h3 id=\"poetry-installation\" style=\"position:relative;\"><a href=\"#poetry-installation\" aria-label=\"poetry installation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>poetry</code> installation</h3>\n<p>Poetry allows you to efficiently manage dependencies and packages in Python. It has a similar role as <code>setup.py</code> or <a href=\"https://pypi.org/project/pipenv/\">pipenv</a>, but offers more flexibility and functionalities. You can declare the libraries your project depends on in a <code>pyproject.toml</code> file. <code>poetry</code> will then install or update them on demand. Additionally this tools allows you to encapsulate your working project into isolated environments. Finally, you can use <code>poetry</code> to directly publish your package on <a href=\"https://pypi.org/\">Pypi</a>.</p>\n<p>As a last pre-requisite we are going to install <code>poetry</code> by running the following command:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -</span></span></span></code></pre>\n<h2 id=\"project-creation\" style=\"position:relative;\"><a href=\"#project-creation\" aria-label=\"project creation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Project creation</h2>\n<p>We are going to see how to create a project and isolate it inside a Python environment using <code>pyenv</code> and <code>poetry</code>.</p>\n<h3 id=\"setting-the-python-version-with-pyenv\" style=\"position:relative;\"><a href=\"#setting-the-python-version-with-pyenv\" aria-label=\"setting the python version with pyenv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting the Python version with <code>Pyenv</code></h3>\n<p>Let's first create a directory named <code>my_awesome_project</code> and move inside:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mkdir my_awesome_project &amp;&amp; </span><span class=\"mtk8\">cd</span><span class=\"mtk1\"> $_</span></span></span></code></pre>\n<p>Once inside, set the local Python version we are going to use (we are going to use Python 3.8.7). This will prompt <code>poetry</code> to use the local version of Python defined by <code>pyenv</code>:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pyenv </span><span class=\"mtk5\">local</span><span class=\"mtk1\"> 3.8.7</span></span></span></code></pre>\n<p>This creates a <code>.python-version</code> file inside our project. This file will be read by <code>pyenv</code> and prompts it to set the defined local Python version. Consequently every directory or file created down this point will depend on the local Python version and not the global one.</p>\n<h3 id=\"create-your-project-with-poetry\" style=\"position:relative;\"><a href=\"#create-your-project-with-poetry\" aria-label=\"create your project with poetry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create your project with <code>poetry</code></h3>\n<p>Poetry proposes a robust CLI allowing you to create, configure and update your Python project and dependencies. To create your Python project use the following command:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">poetry new &lt;project_name&gt;</span></span></span></code></pre>\n<p>This command generates a default project scaffold. The content of our new project is the following:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">├── &lt;project_name&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">│   └── __init__.py</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">├── pyproject.toml</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">├── README.rst</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">└── tests</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ├── __init__.py</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    └── test_summarize_dataframe.py</span></span></span></code></pre>\n<p>Notice the <code>pyproject.toml</code>. This is where we define everything from our project's metadata, dependencies, scripts, and more. If you're familiar with Node.js, consider the <code>pyproject.toml</code> as an equivalent of the Node.js <code>package.json</code>.</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"ini\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">[tool.poetry]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">name = &quot;your_project_name&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">version = &quot;0.1.0&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">description = &quot;&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">authors = [&quot;&lt;username&gt; &lt;email address&gt;&quot;]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[tool.poetry.dependencies]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">python = &quot;^3.8&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[tool.poetry.dev-dependencies]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">pytest = &quot;^5.2&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[build-system]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">requires = [&quot;poetry-core&gt;=1.0.0&quot;]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">build-backend = &quot;poetry.core.masonry.api&quot;</span></span></code></pre>\n<p>We can see several entries in our default <code>pyproject.toml</code> file.</p>\n<ul>\n<li><strong><code>[tool.poetry]</code></strong>: This section contains metadata about our package. You can put there the package name, a short description, author's details, the version of your project, and so on. All details here are optional but will be required if you decided to publish the package on <a href=\"https://pypi.org/\">Pypi</a>.</li>\n<li><strong><code>[tool.poetry.dependencies]</code></strong>: This section contains all required dependencies for our package. You can specify specific version numbers for these packages (<code>packageX = \"1.0.0\"</code>) or use symbols. The version of Python we want the project to use is defined here as well. In our case <code>python = \"^3.8\"</code> specifies the <strong>minimum</strong> version required to run our app. Here this is Python 3.8 and this has been based on the version of our local version defined with <code>pyenv</code>.</li>\n<li><strong><code>[tool.poetry.dev-dependencies]</code></strong>: This section contains all developer dependencies which are packages needed to work and iterate on this project. Nevertheless, these dependencies are not required to run the app and will not be downloaded when building the package.</li>\n<li><strong><code>[build-system]</code></strong>: Do not touch this section unless you updated the version of <code>poetry</code>.</li>\n</ul>\n<blockquote>\n<p>Note: you can see the full list of available entries for the <code>pyproject.toml</code> file <a href=\"https://python-poetry.org/docs/pyproject/\">here</a></p>\n</blockquote>\n<h3 id=\"install-and-activate-the-virtual-environment\" style=\"position:relative;\"><a href=\"#install-and-activate-the-virtual-environment\" aria-label=\"install and activate the virtual environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Install and activate the virtual environment</h3>\n<p>Here you have two approaches: whether you know in advance all dependencies you need and you can directly alter the <code>.toml</code> file accordingly or you decide to add later on when needed. In our example, we are going to add progressively our dependencies while writing code. Consequently, we just need to initialize the project and create the virtual environment. To do this run the command:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">poetry install</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Creating virtualenv summarize-dataframe-SO-g_7pj-py3.8 </span><span class=\"mtk3\">in</span><span class=\"mtk1\"> ~/.cache/pypoetry/virtualenvs</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Updating dependencies</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Resolving dependencies... (6.4s)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Writing lock file</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Package operations: 8 installs, 0 updates, 0 removals</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing pyparsing (2.4.7)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing attrs (20.3.0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing more-itertools (8.7.0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing packaging (20.9)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing pluggy (0.13.1)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing py (1.10.0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing wcwidth (0.2.5)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  • Installing pytest (5.4.3)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Installing the current project: summarize_dataframe (0.1.0)</span></span></span></code></pre>\n<p>Firstly the virtual environment is created and stored outside of the project. A bit similar to what we have when using <a href=\"https://docs.conda.io/en/latest/\"><code>conda</code></a>. Indeed, Instead of creating a folder containing your dependency libraries (as <a href=\"https://pypi.org/project/virtualenv/\"><code>virtualenv</code></a> does), <code>poetry</code> creates an environment on a global system path (<code>.cache/</code> by default). This separation of concerns allows keeping your project away from dependency source code.</p>\n<blockquote>\n<p>Note: You can create your virtual environment inside your project or in any other directories. For that you need to edit the configuration of poetry. Follow this <a href=\"https://python-poetry.org/docs/configuration/\">documentation</a> for more details.</p>\n</blockquote>\n<p>Secondly, <code>poetry</code> is going to read the <code>pyproject.toml</code> and install all dependencies specified in this file. If not defined, poetry will download the last version of the packages. At the end of the operation, a <code>poetry.lock</code> file is created. It contains all packages and their exact versions. Keep in mind that if a <code>poetry.lock</code> file is already present, the version numbers defined in it take precedence over what is defined in the <code>pyproject.toml</code>. Finally, you should commit the <code>poetry.lock</code> file to your project repository so that all collaborators working on the project use the same versions of dependencies.</p>\n<p>Now let's activate the environment we just created with the following command:</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">peotry shell</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">Spawning shell within ~/.cache/pypoetry/virtualenvs/summarize-dataframe-SO-g_7pj-py3.8</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">.</span><span class=\"mtk1\"> ~/.cache/pypoetry/virtualenvs/summarize-dataframe-SO-g_7pj-py3.8/bin/activate</span></span></span></code></pre>\n<p>The command creates a child process that inherits from the parent Shell but will not alter its environment. It encapsulates and restrict any modifications you will perform to your project environment.</p>\n<h3 id=\"create-our-git-repository\" style=\"position:relative;\"><a href=\"#create-our-git-repository\" aria-label=\"create our git repository permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create our <code>git</code> repository</h3>\n<p>For our last step here we are going to create a git repository, add <code>README.md</code> and <code>.gitignore</code> files and push everything to our <a href=\"https://github.com/fbraza/summarize_dataframe\">remote repository</a>.</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">git init</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">git remote add origin https://github.com/fbraza/summarize_dataframe.git</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&quot;.*\\n!.gitignore&quot;</span><span class=\"mtk1\"> &gt; .gitignore</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk8\">echo</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&quot;# Summarize dataframe&quot;</span><span class=\"mtk1\"> &gt; README.md</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">git add </span><span class=\"mtk8\">.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">git commit -m </span><span class=\"mtk7\">&quot;build: first commit. Environment built&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">git push -u origin master</span></span></span></code></pre>\n<h2 id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p>Herein we have seen how to install and manage different versions of Python on our machine using <code>pyenv</code>. We demonstrated how to leverage <code>pyenv local</code> to set a specific Python version in your project and then create a virtual environment using <code>poetry</code>. The use of <code>poetry</code> really smoothens the process of creation by proposing a simple and widely project scaffold. In addition, it includes the minimum build system requirements as defined by <a href=\"https://www.python.org/dev/peps/pep-0518/\">PEP 518</a>.</p>\n<p>In our next article, we are going to dive more into our project. We will write some code  with their respective unit tests and see how we can use <code>poetry</code> to add the expected dependencies and run the tests. Finally, we are going to go a bit further and install all necessary dependencies with <code>poetry</code> to help us enforcing good practices with our <code>git</code> commits when using a Python project.</p>\n<h2 id=\"cheat-sheet\" style=\"position:relative;\"><a href=\"#cheat-sheet\" aria-label=\"cheat sheet permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cheat sheet</h2>\n<h3 id=\"pyenv\" style=\"position:relative;\"><a href=\"#pyenv\" aria-label=\"pyenv permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>pyenv</code></h3>\n<ul>\n<li>\n<p>Get all available and installable versions of Python</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  pyenv install --list</span></span></span></code></pre>\n</li>\n<li>\n<p>Set the global Python version</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> pyenv global &lt;version_id&gt;</span></span></span></code></pre>\n</li>\n<li>\n<p>Set a local Python version</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  pyenv </span><span class=\"mtk5\">local</span><span class=\"mtk1\"> &lt;version_id&gt;</span></span></span></code></pre>\n</li>\n</ul>\n<h3 id=\"poetry\" style=\"position:relative;\"><a href=\"#poetry\" aria-label=\"poetry permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>poetry</code></h3>\n<ul>\n<li>\n<p>Create a project</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  poetry new &lt;project_name&gt;</span></span></span></code></pre>\n</li>\n<li>\n<p>Install core dependencies and create environment</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  poetry install</span></span></span></code></pre>\n</li>\n<li>\n<p>Activate environment</p>\n<pre class=\"grvsc-container panda-syntax\" data-language=\"bash\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  poetry shell</span></span></span></code></pre>\n</li>\n</ul>\n<h2 id=\"acknowledgments\" style=\"position:relative;\"><a href=\"#acknowledgments\" aria-label=\"acknowledgments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Acknowledgments</h2>\n<p>This article was first published in Adaltas <a href=\"https://www.adaltas.com/en/articles/\">blog</a> and kindly reviewed by the CEO David Worms and one consultant Barthelemy NGOM.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .panda-syntax {\n    background-color: #292A2B;\n    color: #E6E6E6;\n  }\n  .panda-syntax .mtk1 { color: #E6E6E6; }\n  .panda-syntax .mtk8 { color: #6FC1FF; }\n  .panda-syntax .mtk5 { color: #FFB86C; }\n  .panda-syntax .mtk3 { color: #FF75B5; }\n  .panda-syntax .mtk7 { color: #19F9D8; }\n  .panda-syntax .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","frontmatter":{"title":"Modern Python part 1: start a project with pyenv & poetry","date":"09 June, 2021","tags":["Python"]},"excerpt":"When learning a programming language, the focus is essentially on understanding the syntax, the code style, and the underlying concepts…"}},"pageContext":{"slug":"/modern-python-part1/"}},"staticQueryHashes":["3649515864","63159454"],"slicesMap":{}}